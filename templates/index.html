<!DOCTYPE html>
<html lang="ru" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Downloader</title>
    <!-- CSRF Token -->
    <meta name="csrf-token" content="{{ csrf_token() if csrf_token else '' }}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/static/logo.png" type="image/png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        html { background-color: #121212; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding-top: 40px; min-height: 100vh; display: flex; flex-direction: column; color: #e0e0e0; }
        .content-wrapper { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; padding: 20px; }
        .main-card { background-color: #1e1e1e; color: #e0e0e0; box-shadow: 0 10px 25px rgba(0,0,0,0.5); width: 100%; max-width: 600px; margin: 0; padding: 30px; border-radius: 20px; }
        .app-title { font-weight: 700; color: #ffffff; margin-bottom: 30px; }
        .quality-buttons-container { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px; }
        .quality-btn { flex: 1 1 140px; padding: 12px; border-radius: 12px; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s; }
        .quality-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .thumbnail-box { margin: 20px 0; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .thumbnail-box img { width: 100%; display: block; transition: transform 0.3s ease; }
        .thumbnail-box:hover img { transform: scale(1.05); }
        #progress-section { display: none; margin-top: 25px; background: #2d2d2d; color: #ffffff; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        .progress { height: 20px; border-radius: 10px; background-color: #444; }
        #download-section { display: none; margin-top: 25px; text-align: center; }
        .btn-download-file { width: 100%; padding: 15px; font-size: 1.1rem; border-radius: 12px; }
        
        /* –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å */
        .top-bar { position: fixed; top: 25px; right: 25px; z-index: 1000; display: flex; align-items: center; gap: 15px; background: rgba(30, 30, 30, 0.6); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); padding: 8px 20px; border-radius: 50px; border: 1px solid rgba(255, 255, 255, 0.1); box-shadow: 0 4px 20px rgba(0,0,0,0.3); transition: all 0.3s ease; }
        .top-bar .btn { border-radius: 20px; font-weight: 600; }
        .brand-logo { position: fixed; top: 20px; left: 20px; z-index: 1000; font-weight: 800; font-size: 1.5rem; text-decoration: none; color: #e0e0e0; font-family: 'Montserrat', sans-serif; display: flex; align-items: center; gap: 10px; -webkit-tap-highlight-color: transparent; }
        .brand-logo img { height: 40px; width: auto; }
        
        #splash-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #ffffff; z-index: 99999; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease-out, visibility 0.5s; }
        #splash-screen.hidden { opacity: 0; visibility: hidden; }
        /* –ê–Ω–∏–º–∞—Ü–∏—è Brush Reveal (–ú–∞–∑–æ–∫ –∫–∏—Å—Ç–∏) */
        #splash-screen img { max-width: 300px; width: 60%; height: auto; animation: brush-reveal 1.5s cubic-bezier(0.19, 1, 0.22, 1) forwards; user-select: none; -webkit-user-drag: none; pointer-events: none; }
        @keyframes brush-reveal {
            0% { opacity: 0; clip-path: polygon(0 50%, 0 50%, 0 50%, 0 50%); transform: scale(0.9) skewX(-15deg); filter: blur(8px); }
            100% { opacity: 1; clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); transform: scale(1) skewX(0deg); filter: blur(0); }
        }
        
        /* –°–Ω–µ–≥ */
        #snow-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; transition: transform 0.1s ease-out; }
        .snowflake { position: absolute; top: -10px; background: white; border-radius: 50%; user-select: none; pointer-events: none; animation: fall linear infinite; box-shadow: 0 0 5px rgba(255,255,255,0.8); }
        /* –°–Ω–µ–≥ –ø–∞–¥–∞–µ—Ç —Å –Ω–µ–±–æ–ª—å—à–∏–º —Å–¥–≤–∏–≥–æ–º –≤–ø—Ä–∞–≤–æ (–≤–µ—Ç–µ—Ä) */
        @keyframes fall { 
            0% { transform: translate(0, -10px); }
            100% { transform: translate(10vw, 120vh); } 
        }
        .snow-pile { position: fixed; bottom: 0; left: 0; width: 100%; height: 15px; background: rgba(255, 255, 255, 0.6); filter: blur(8px); z-index: 9998; pointer-events: none; }
        
        /* –ö–Ω–æ–ø–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ */
        .feedback-corner { position: fixed; bottom: 30px; right: 30px; z-index: 9000; }
        .feedback-btn {
            width: 60px; height: 60px;
            background-color: #ffc107; color: #000;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 28px; text-decoration: none;
            box-shadow: 0 4px 15px rgba(255, 193, 7, 0.4);
            transition: transform 0.3s ease;
            animation: pulse-yellow 2s infinite;
        }
        .feedback-btn:hover { transform: scale(1.1); color: #000; }
        @keyframes pulse-yellow {
            0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 193, 7, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
        }
        
        /* Toggles */
        .form-switch .form-check-input { height: 1.5em; width: 2.5em; border-radius: 2em; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23fff'/%3e%3c/svg%3e"); transition: background-position .15s ease-in-out, background-color .15s ease-in-out; cursor: pointer; }
        .form-switch .form-check-input:checked { background-color: #34C759; border-color: #34C759; }
        .form-switch .form-check-input:focus { box-shadow: none; }
        
        @media (max-width: 768px) {
            .brand-logo, .top-bar { position: static; display: flex; justify-content: center; width: 100%; margin-bottom: 15px; background: transparent; border: none; box-shadow: none; padding: 0; }
            .content-wrapper { padding-top: 10px; }
            .brand-logo { order: 1; }
            .top-bar { order: 2; }
            .main-card { order: 3; }
        }
        
        /* --- –°–¢–ò–õ–ò–ó–ê–¶–ò–Ø –ú–û–î–ê–õ–¨–ù–´–• –û–ö–û–ù (Glassmorphism) --- */
        .modal-content {
            background: rgba(30, 30, 30, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            color: #e0e0e0;
        }
        .modal-header, .modal-footer { border-color: rgba(255, 255, 255, 0.1); }
        .btn-close { filter: invert(1) grayscale(100%) brightness(200%); }
        .list-group-item { background: transparent; border-color: rgba(255, 255, 255, 0.1); color: #e0e0e0; }
        .list-group-item:hover { background: rgba(255, 255, 255, 0.05); color: #fff; }
        .list-group-item-action:active { background: rgba(255, 255, 255, 0.1); color: #fff; }
        
        /* SweetAlert2 Dark Theme Overrides */
        div:where(.swal2-container) div:where(.swal2-popup) { background: #1e1e1e !important; color: #e0e0e0 !important; border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; }
        div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm { background-color: #0d6efd !important; border-radius: 10px; }
        div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel { background-color: #343a40 !important; border-radius: 10px; }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –æ–Ω–ª–∞–π–Ω (–∑–µ–ª–µ–Ω–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è) */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(46, 204, 113, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }
        .avatar-online {
            animation: pulse-green 2s infinite;
        }
        /* –°—Ç–∏–ª–∏ –¥–ª—è –±–æ–∫–æ–≤–æ–π —Ä–µ–∫–ª–∞–º—ã */
        .app-sidebar-panel {
            position: absolute; top: 150px; /* –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º –∫ —Ñ–æ–Ω—É, –∞ –Ω–µ –∫ —ç–∫—Ä–∞–Ω—É */
            width: 160px; height: 600px; z-index: 90;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: transform 0.3s ease-in-out;
            background-color: #252525; /* –û—Ç–ª–∏—á–Ω—ã–π –æ—Ç —Ñ–æ–Ω–∞ —Ü–≤–µ—Ç */
            border: 1px solid #3a3a3a;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
            border-radius: 12px;
        }
        .app-sidebar-panel:hover { transform: translateY(-50%) scale(1.02); z-index: 100; border-color: #555; }
        .app-sidebar-left { left: 10px; }
        .app-sidebar-right { right: 10px; }
        @media (max-width: 900px) { .app-sidebar-panel { display: none; } }
    </style>
</head>
<body>

<!-- –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
<div id="splash-screen">
    <!-- –°—Ç–∞—Ç–∏—á–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø —Å CSS –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
    <img src="/static/startup_logo.png" alt="Video Downloader" draggable="false" oncontextmenu="return false;">
</div>

<script>
    // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∑–∞—Å—Ç–∞–≤–∫—É –ø—Ä–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å "–±–µ–ª–æ–π –≤—Å–ø—ã—à–∫–∏"
    (function(){
        try {
            var s = document.getElementById('splash-screen');
            var isReload = false;
            try {
                if (window.performance && window.performance.navigation && window.performance.navigation.type === 1) isReload = true;
                if (window.performance && window.performance.getEntriesByType && window.performance.getEntriesByType("navigation")[0] && window.performance.getEntriesByType("navigation")[0].type === 'reload') isReload = true;
            } catch(e){}
            
            if (s && !isReload && document.referrer && document.referrer.indexOf(window.location.origin) === 0) { s.style.display = 'none'; }
        } catch(e){}
    })();
</script>

<div class="content-wrapper container-fluid mb-5">
    <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞ —Å–ª–µ–≤–∞ -->
    <a href="/" class="brand-logo">
        <img src="/static/logo.png" alt="Logo" onerror="this.outerHTML='<i class=\'bi bi-play-circle-fill text-danger fs-2 me-2\'></i>'">
        Video Downloader
    </a>

    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="top-bar">
        <a href="/premium" id="topBarPremiumBtn" class="btn btn-sm btn-warning text-dark fw-bold" style="background: linear-gradient(45deg, #FFD700, #FFC107); border: none; box-shadow: 0 0 20px rgba(255, 215, 0, 0.8);"><i class="bi bi-gem"></i> Premium</a>
        <button class="btn btn-sm btn-dark rounded-circle shadow-sm" style="width: 32px; height: 32px; padding: 0;" onclick="new bootstrap.Modal(document.getElementById('settingsModal')).show()" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏"><i class="bi bi-gear-fill"></i></button>
        <div id="authSection" class="d-flex gap-2 align-items: center">
            <!-- JS –≤—Å—Ç–∞–≤–∏—Ç –∫–Ω–æ–ø–∫–∏ -->
        </div>
    </div>

    <div class="d-flex justify-content-center w-100">
        <div class="main-card">

        <h2 class="text-center app-title" id="mainTitle">
            –°–∫–∞—á–∞—Ç—å –í–∏–¥–µ–æ
        </h2>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ª–∏–º–∏—Ç–∞ –¥–ª—è Free –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥–æ—Å—Ç–µ–π -->
        {% if not is_premium %}
        <div class="mb-3 text-center">
            <span class="badge rounded-pill {{ 'bg-danger' if limit_reached else 'bg-secondary' }} bg-opacity-25 text-light border border-secondary border-opacity-25 px-3 py-2" id="limitBadge">
                <i class="bi bi-cloud-download"></i> <span id="txtLimitLabel">–õ–∏–º–∏—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</span> <b id="limitCount">{{ downloads_today }}/5</b>
            </span>
            {% if limit_reached %}
            <div class="mt-3 p-3 rounded-3 border border-danger border-opacity-50 bg-danger bg-opacity-10">
                <div class="text-danger fw-bold mb-2"><i class="bi bi-exclamation-circle-fill"></i> –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω</div>
                <div class="small text-white-50 mb-2">–í—ã –∏—Å—á–µ—Ä–ø–∞–ª–∏ 5 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–∫–∞—á–∏–≤–∞–Ω–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.</div>
                {% if not session.get('user_id') %}
                <a href="/register_page" class="btn btn-sm btn-primary fw-bold shadow-sm mb-2">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
                {% endif %}
                <a href="/premium" class="btn btn-sm btn-warning fw-bold text-dark shadow-sm">–°–Ω—è—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</a>
            </div>
            {% endif %}
        </div>
        {% endif %}
        
        <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
        <div class="input-group mb-3">
            <input type="text" id="urlInput" class="form-control form-control-lg" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É YouTube..." aria-label="URL" oninput="validateUrl()" onpaste="setTimeout(() => { if(validateUrl()) getInfo(); }, 100)" {% if limit_reached %}disabled{% endif %}>
            <button id="searchBtn" class="btn btn-primary btn-lg" type="button" onclick="getInfo()" disabled {% if limit_reached %}disabled{% endif %}>–ò—Å–∫–∞—Ç—å</button>
        </div>
        
        <div id="searchMessage" class="text-center mb-3 small fw-bold text-warning" style="display: none; animation: fadeIn 0.5s;">
            <i class="bi bi-lightning-charge-fill"></i> <span id="txtSlowSearch">–ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫?</span> <a href="#" onclick="buyPremium('month'); return false;" class="text-warning text-decoration-underline" id="lnkBuyPremFast">–ö—É–ø–∏—Ç–µ Premium –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è!</a>
        </div>

        <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (—Å–∫—Ä—ã—Ç–∞—è) -->
        <div class="mb-3 text-center">
            <a class="text-decoration-none small text-muted" data-bs-toggle="collapse" href="#howToUse" role="button" aria-expanded="false" id="howToLink">
                <i class="bi bi-question-circle"></i> –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
            </a>
            <div class="collapse mt-2" id="howToUse">
                <div class="alert alert-secondary small text-start m-0" id="howToContent">
                    <ol class="mb-0 ps-3">
                        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ.</li>
                        <li>–í—Å—Ç–∞–≤—å—Ç–µ –µ—ë –≤ –ø–æ–ª–µ (–ø–æ–∏—Å–∫ –Ω–∞—á–Ω–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).</li>
                        <li>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ —Å–∫–∞—á–∞–π—Ç–µ.</li>
                    </ol>
                    <div class="mt-2 text-danger fw-bold"><i class="bi bi-exclamation-triangle-fill"></i> –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ 18+ –∑–∞–ø—Ä–µ—â–µ–Ω–æ!</div>
                    <div class="mt-2"><i class="bi bi-info-circle-fill text-primary"></i> <b>–í–∞–∂–Ω–æ:</b> –ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã –≤–æ—à–ª–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç.</div>
                </div>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–∏–¥–µ–æ -->
        <div id="videoInfo" style="display:none;">
            <div class="thumbnail-box">
                <img id="thumb" src="" alt="Thumbnail">
            </div>
            <h5 id="videoTitle" class="text-center mb-2"></h5>
            <p class="text-center text-muted small"><span id="lblDuration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span> <span id="duration"></span></p>

            <div class="text-center mb-3 text-secondary" id="lblQuality">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ:</div>
            
            <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∫–Ω–æ–ø–∫–∏ -->
            <div class="quality-buttons-container" id="buttonsContainer">
                <!-- –ö–Ω–æ–ø–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –≤–∏–¥–µ–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞ -->
            <div id="playlistContainer" class="mt-4" style="display: none;"></div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ (–ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä) -->
        <div id="progress-section">
            <div class="d-flex justify-content-between mb-1">
                <span id="statusText">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞...</span>
                <span id="percentText">0%</span>
            </div>
            <div class="progress">
                <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ -->
        <div id="download-section">
            <a id="downloadBtn" href="#" class="btn btn-success btn-download-file mb-3"><i class="bi bi-download"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª</a>
            <!-- –ö–Ω–æ–ø–∫–∞ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <button id="shareBtn" class="btn btn-primary btn-download-file mb-3" style="display: none;" onclick="shareFile()"> <i class="bi bi-share"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
            <button class="btn btn-outline-secondary w-100" onclick="resetApp()" id="btnReload">–°–∫–∞—á–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤–∏–¥–µ–æ</button>
        </div>
            </div>
    </div>

</div>

<!-- –ü–æ–¥–≤–∞–ª -->
<div class="container text-center">
    <div class="footer-links mb-3">
        <a href="/about" id="footerAbout" class="text-muted mx-2 text-decoration-none">–û –Ω–∞—Å</a>
        <a href="/privacy" id="footerPrivacy" class="text-muted mx-2 text-decoration-none">–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a>
        <a href="/terms" id="footerTerms" class="text-muted mx-2 text-decoration-none">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
    </div>
    <div class="text-muted mt-2 small" id="footerCopyright">&copy; 2025 Video Downloader</div>
</div>

<!-- –ë–∞–Ω–Ω–µ—Ä Cookies -->
<div id="cookie-banner" style="display:none; position: fixed; bottom: 0; left: 0; right: 0; background-color: #212529; color: white; padding: 15px; text-align: center; z-index: 9999; box-shadow: 0 -2px 10px rgba(0,0,0,0.2);">
    <div class="container d-flex justify-content-center align-items-center flex-wrap gap-3">
        <span class="small text-start" style="max-width: 600px;" id="cookieText"></span>
        <button class="btn btn-sm btn-success" onclick="acceptCookies()" id="cookieAccept">–ü—Ä–∏–Ω—è—Ç—å</button>
        <button class="btn btn-sm btn-outline-light" onclick="rejectCookies()" id="cookieReject">–û—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—Å–µ</button>
    </div>
</div>

<!-- –°—É–≥—Ä–æ–± –∏ —Å–Ω–µ–≥ -->
<div class="snow-pile"></div>
<div id="snow-container"></div>

<!-- –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
<div class="feedback-corner">
    <a href="/feedback" class="feedback-btn" title="–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å"><i class="bi bi-chat-dots-fill"></i></a>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
<div class="modal fade" id="historyModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="historyModalTitle">üìÇ –ú–æ–∏ —Å–∫–∞—á–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ</h5>
                <div class="ms-auto">
                    <button class="btn btn-sm btn-outline-danger me-2" onclick="clearHistory()" title="–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é"><i class="bi bi-trash"></i></button>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
            </div>
            <div class="modal-body"><div id="historyList" class="list-group"><div class="text-center text-muted">–ó–∞–≥—Ä—É–∑–∫–∞...</div></div></div>
        </div>
    </div>
</div>

<div class="modal fade" id="notificationHistoryModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title" id="notifModalTitle">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
            <div class="modal-body"><div id="notificationList" class="list-group list-group-flush"></div></div>
        </div>
    </div>
</div>

<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1100;">
  <div id="liveToast" class="toast align-items-center border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex"><div class="toast-body" id="toastBody"></div><button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button></div>
  </div>
</div>

<div class="modal fade" id="settingsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content" style="background: #1e1e1e; color: #e0e0e0;">
            <div class="modal-header border-secondary"><h5 class="modal-title" id="settingsTitle"><i class="bi bi-gear-fill"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
            <div class="modal-body">
                <div class="mb-3"><label class="form-label text-muted small mb-1">–Ø–∑—ã–∫ / Language</label><select class="form-select form-select-sm bg-dark text-white border-secondary" id="settingLang" onchange="saveSettings()"><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="en">English</option><option value="kg">–ö—ã—Ä–≥—ã–∑—á–∞</option></select></div>
                <div class="form-check form-switch mb-3 d-flex justify-content-between align-items-center ps-0"><label class="form-check-label" for="settingSnow" id="lblSnow">‚ùÑÔ∏è –°–Ω–µ–≥–æ–ø–∞–¥</label><input class="form-check-input ms-auto" type="checkbox" id="settingSnow" onchange="saveSettings()"></div>
                <div class="form-check form-switch mb-3 d-flex justify-content-between align-items-center ps-0"><label class="form-check-label" for="settingSound" id="lblSound">üîä –ó–≤—É–∫–∏</label><input class="form-check-input ms-auto" type="checkbox" id="settingSound" onchange="saveSettings()"></div>
                <div class="form-check form-switch mb-3 d-flex justify-content-between align-items-center ps-0"><label class="form-check-label" for="settingToasts" id="lblToasts">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</label><input class="form-check-input ms-auto" type="checkbox" id="settingToasts" onchange="saveSettings()"></div>
                <div class="form-check form-switch mb-3 d-flex justify-content-between align-items-center ps-0"><label class="form-check-label" for="settingRelax" id="lblRelax">üåä –†–µ–ª–∞–∫—Å (–î–æ–∂–¥—å)</label><input class="form-check-input ms-auto" type="checkbox" id="settingRelax" onchange="saveSettings()"></div>
                <div class="mt-4 pt-3 border-top border-secondary"><button class="btn btn-sm btn-outline-danger w-100" onclick="clearCache()" id="btnClearCache"><i class="bi bi-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à</button></div>
            </div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –õ–ò–ú–ò–¢ –ò–°–ß–ï–†–ü–ê–ù -->
<div class="modal fade" id="limitModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark text-white border-warning">
            <div class="modal-header border-secondary">
                <h5 class="modal-title text-warning"><i class="bi bi-exclamation-triangle-fill"></i> –õ–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω</h5>
            </div>
            <div class="modal-body text-center">
                <p class="fs-5">–í—ã –∏—Å—á–µ—Ä–ø–∞–ª–∏ –ª–∏–º–∏—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–∫–∞—á–∏–≤–∞–Ω–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (5 –≤–∏–¥–µ–æ).</p>
                <p class="text-muted">–ß—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Premium.</p>
                <a href="/premium" class="btn btn-warning w-100 fw-bold py-2 mb-2">–ö—É–ø–∏—Ç—å Premium</a>
                <button type="button" class="btn btn-outline-light w-100" onclick="location.reload()">–Ø –ø–æ–Ω—è–ª</button>
            </div>
        </div>
    </div>
</div>

<!-- –†–µ–∫–ª–∞–º–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π (–ø–æ—Å–ª–µ –ø–æ–∏—Å–∫–∞) -->
<div id="adOverlay" class="d-none position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-75 z-3 d-flex flex-column justify-content-center align-items-center" style="z-index: 10000 !important; backdrop-filter: blur(5px);">
    <div class="text-white mb-4 fs-4 fw-bold">–†–µ–∫–ª–∞–º–∞ –∑–∞–∫—Ä–æ–µ—Ç—Å—è —á–µ—Ä–µ–∑ <span id="adTimer" class="text-warning display-6 fw-bold">5</span></div>
    <div class="bg-white p-2 rounded shadow-lg">
        <div class="bg-dark p-5 rounded text-center" style="min-width: 300px; max-width: 90vw;">
            <img src="/static/logo.png" alt="Logo" style="width: 100px; margin-bottom: 20px;">
            <h2 class="text-white fw-bold">Video Downloader Premium</h2>
            <p class="text-white-50 fs-5">–°–∫–∞—á–∏–≤–∞–π –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∏ —Ä–µ–∫–ª–∞–º—ã!</p>
            <div class="mt-4 text-warning border border-warning rounded p-2 d-inline-block">–õ—É—á—à–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≥–æ–¥–∞</div>
        </div>
    </div>
    <a href="/premium" class="btn btn-warning mt-4 px-5 fw-bold rounded-pill py-2 shadow-lg text-uppercase">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ Premium <i class="bi bi-arrow-right-circle-fill"></i></a>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
